<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>dodgr_dists — dodgr_dists • dodgr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="dodgr_dists — dodgr_dists" />
<meta property="og:description" content="Calculate matrix of pair-wise distances between points." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dodgr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.7.011</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ATFutures/dodgr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>dodgr_dists</h1>
    <small class="dont-index">Source: <a href='https://github.com/ATFutures/dodgr/blob/master/R/dists.R'><code>R/dists.R</code></a></small>
    <div class="hidden name"><code>dodgr_dists.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate matrix of pair-wise distances between points.</p>
    </div>

    <pre class="usage"><span class='fu'>dodgr_dists</span>(
  <span class='no'>graph</span>,
  <span class='kw'>from</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>to</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>shortest</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>pairwise</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>heap</span> <span class='kw'>=</span> <span class='st'>"BHeap"</span>,
  <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>graph</th>
      <td><p><code>data.frame</code> or equivalent object representing the network
graph (see Notes)</p></td>
    </tr>
    <tr>
      <th>from</th>
      <td><p>Vector or matrix of points <strong>from</strong> which route distances are to
be calculated (see Notes)</p></td>
    </tr>
    <tr>
      <th>to</th>
      <td><p>Vector or matrix of points <strong>to</strong> which route distances are to be
calculated (see Notes)</p></td>
    </tr>
    <tr>
      <th>shortest</th>
      <td><p>If <code>FALSE</code>, calculate distances along the <em>fastest</em>
rather than shortest routes (see Notes).</p></td>
    </tr>
    <tr>
      <th>pairwise</th>
      <td><p>If <code>TRUE</code>, calculate distances only between the ordered
pairs of <code>from</code> and <code>to</code>.</p></td>
    </tr>
    <tr>
      <th>heap</th>
      <td><p>Type of heap to use in priority queue. Options include
Fibonacci Heap (default; <code>FHeap</code>), Binary Heap (<code>BHeap</code>),
<code>Trinomial Heap (</code>TriHeap<code>), Extended Trinomial Heap (</code>TriHeapExt<code>, and 2-3 Heap (</code>Heap23`).</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>If <code>TRUE</code>, perform routing calculation in parallel (see
details)</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>If <code>FALSE</code>, display progress messages on screen.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>square matrix of distances between nodes</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p><code>graph</code> must minimally contain three columns of <code>from</code>,
<code>to</code>, <code>dist</code>. If an additional column named <code>weight</code> or
<code>wt</code> is present, shortest paths are calculated according to values
specified in that column; otherwise according to <code>dist</code> values. Either
way, final distances between <code>from</code> and <code>to</code> points are calculated
by default according to values of <code>dist</code>. That is, paths between any pair of
points will be calculated according to the minimal total sum of <code>weight</code>
values (if present), while reported distances will be total sums of <code>dist</code>
values.</p>
<p>For street networks produced with <a href='weight_streetnet.html'>weight_streetnet</a>, distances may also
be calculated along the <em>fastest</em> routes with the <code>shortest = FALSE</code>
option. Graphs must in this case have columns of <code>time</code> and <code>time_weighted</code>.
Note that the fastest routes will only be approximate when derived from
<span class="pkg">sf</span>-format data generated with the <span class="pkg">osmdata</span> function
<code>osmdata_sf()</code>, and will be much more accurate when derived from <code>sc</code>-format
data generated with <code>osmdata_sc()</code>. See <a href='weight_streetnet.html'>weight_streetnet</a> for details.</p>
<p>The <code>from</code> and <code>to</code> columns of <code>graph</code> may be either single
columns of numeric or character values specifying the numbers or names of
graph vertices, or combinations to two columns specifying geographical
(longitude and latitude) coordinates. In the latter case, almost any sensible
combination of names will be accepted (for example, <code>fromx, fromy</code>,
<code>from_x, from_y</code>, or <code>fr_lat, fr_lon</code>.)</p>
<p><code>from</code> and <code>to</code> values can be either two-column matrices of
equivalent of longitude and latitude coordinates, or else single columns
precisely matching node numbers or names given in <code>graph$from</code> or
<code>graph$to</code>. If <code>to</code> is <code>NULL</code>, pairwise distances are calculated
between all points specified in <code>from</code>. If both <code>from</code> and <code>to</code> are <code>NULL</code>,
pairwise distances are calculated between all nodes in <code>graph</code>.</p>
<p>Calculations in parallel (<code>parallel = TRUE</code>) ought very generally be
advantageous. For small graphs, calculating distances in parallel is likely
to offer relatively little gain in speed, but increases from parallel
computation will generally markedly increase with increasing graph sizes.
By default, parallel computation uses the maximal number of available cores
or threads. This number can be reduced by specifying a value via
<code>RcppParallel::setThreadOptions (numThreads = &lt;desired_number&gt;)</code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># A simple graph</span>
<span class='no'>graph</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span> (<span class='kw'>from</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span> (<span class='st'>"A"</span>, <span class='st'>"B"</span>, <span class='st'>"B"</span>, <span class='st'>"B"</span>, <span class='st'>"C"</span>, <span class='st'>"C"</span>, <span class='st'>"D"</span>, <span class='st'>"D"</span>),
                     <span class='kw'>to</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span> (<span class='st'>"B"</span>, <span class='st'>"A"</span>, <span class='st'>"C"</span>, <span class='st'>"D"</span>, <span class='st'>"B"</span>, <span class='st'>"D"</span>, <span class='st'>"C"</span>, <span class='st'>"A"</span>),
                     <span class='kw'>d</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span> (<span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>1</span>, <span class='fl'>3</span>, <span class='fl'>2</span>, <span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>1</span>))
<span class='fu'>dodgr_dists</span> (<span class='no'>graph</span>)</div><div class='output co'>#&gt;   A B C D
#&gt; A 0 1 2 3
#&gt; B 2 0 1 2
#&gt; C 2 2 0 1
#&gt; D 1 2 2 0</div><div class='input'>
<span class='co'># A larger example from the included [hampi()] data.</span>
<span class='no'>graph</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='weight_streetnet.html'>weight_streetnet</a></span> (<span class='no'>hampi</span>)
<span class='no'>from</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span> (<span class='no'>graph</span>$<span class='no'>from_id</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>100</span>)
<span class='no'>to</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span> (<span class='no'>graph</span>$<span class='no'>to_id</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>50</span>)
<span class='no'>d</span> <span class='kw'>&lt;-</span> <span class='fu'>dodgr_dists</span> (<span class='no'>graph</span>, <span class='kw'>from</span> <span class='kw'>=</span> <span class='no'>from</span>, <span class='kw'>to</span> <span class='kw'>=</span> <span class='no'>to</span>)
<span class='co'># d is a 100-by-50 matrix of distances between `from` and `to`</span>

<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># a more complex street network example, thanks to @chrijo; see</span>
<span class='co'># https://github.com/ATFutures/dodgr/issues/47</span>

<span class='no'>xy</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span> (<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span> (<span class='fl'>7.005994</span>, <span class='fl'>51.45774</span>), <span class='co'># limbeckerplatz 1 essen germany</span>
             <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span> (<span class='fl'>7.012874</span>, <span class='fl'>51.45041</span>)) <span class='co'># hauptbahnhof essen germany</span>
<span class='no'>xy</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span> (<span class='kw'>lon</span> <span class='kw'>=</span> <span class='no'>xy</span> [, <span class='fl'>1</span>], <span class='kw'>lat</span> <span class='kw'>=</span> <span class='no'>xy</span> [, <span class='fl'>2</span>])
<span class='no'>essen</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dodgr_streetnet.html'>dodgr_streetnet</a></span> (<span class='kw'>pts</span> <span class='kw'>=</span> <span class='no'>xy</span>, <span class='kw'>expand</span> <span class='kw'>=</span> <span class='fl'>0.2</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>graph</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='weight_streetnet.html'>weight_streetnet</a></span> (<span class='no'>essen</span>, <span class='kw'>wt_profile</span> <span class='kw'>=</span> <span class='st'>"foot"</span>)
<span class='no'>d</span> <span class='kw'>&lt;-</span> <span class='fu'>dodgr_dists</span> (<span class='no'>graph</span>, <span class='kw'>from</span> <span class='kw'>=</span> <span class='no'>xy</span>, <span class='kw'>to</span> <span class='kw'>=</span> <span class='no'>xy</span>)
<span class='co'># First reason why this does not work is because the graph has multiple,</span>
<span class='co'># disconnected components.</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span> (<span class='no'>graph</span>$<span class='no'>component</span>)
<span class='co'># reduce to largest connected component, which is always number 1</span>
<span class='no'>graph</span> <span class='kw'>&lt;-</span> <span class='no'>graph</span> [<span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span> (<span class='no'>graph</span>$<span class='no'>component</span> <span class='kw'>==</span> <span class='fl'>1</span>), ]
<span class='no'>d</span> <span class='kw'>&lt;-</span> <span class='fu'>dodgr_dists</span> (<span class='no'>graph</span>, <span class='kw'>from</span> <span class='kw'>=</span> <span class='no'>xy</span>, <span class='kw'>to</span> <span class='kw'>=</span> <span class='no'>xy</span>)
<span class='co'># should work, but even then note that</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span> (<span class='no'>essen</span>$<span class='no'>level</span>)
<span class='co'># There are parts of the network on different building levels (because of</span>
<span class='co'># shopping malls and the like). These may or may not be connected, so it may</span>
<span class='co'># be necessary to filter out particular levels</span>
<span class='no'>index</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span> (! (<span class='no'>essen</span>$<span class='no'>level</span> <span class='kw'>==</span> <span class='st'>"-1"</span> <span class='kw'>|</span> <span class='no'>essen</span>$<span class='no'>level</span> <span class='kw'>==</span> <span class='st'>"1"</span>)) <span class='co'># for example</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span> (<span class='no'>sf</span>) <span class='co'># needed for following sub-select operation</span>
<span class='no'>essen</span> <span class='kw'>&lt;-</span> <span class='no'>essen</span> [<span class='no'>index</span>, ]
<span class='no'>graph</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='weight_streetnet.html'>weight_streetnet</a></span> (<span class='no'>essen</span>, <span class='kw'>wt_profile</span> <span class='kw'>=</span> <span class='st'>"foot"</span>)
<span class='no'>graph</span> <span class='kw'>&lt;-</span> <span class='no'>graph</span> [<span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span> (<span class='no'>graph</span>$<span class='no'>component</span> <span class='kw'>==</span> <span class='fl'>1</span>), ]
<span class='no'>d</span> <span class='kw'>&lt;-</span> <span class='fu'>dodgr_dists</span> (<span class='no'>graph</span>, <span class='kw'>from</span> <span class='kw'>=</span> <span class='no'>xy</span>, <span class='kw'>to</span> <span class='kw'>=</span> <span class='no'>xy</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Mark Padgham, Andreas Petutschnig.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


